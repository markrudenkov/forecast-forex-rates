<div class="container">
    <div class="row">
        <div class="centered">
            <h1 id="tables">Trading Simulation</h1>
            <!--<h2>Select the currency pair</h2>-->
        </div>
    </div>
    <div class="row">
        <div class="text-center">
            <div class="group">
                <div class="btn-group">
                    <label ng-repeat="(index, currency) in $ctrl.currencyPairs"
                           class="btn btn-raised btn-primary" ng-model="$parent.radioModel"
                           uib-btn-radio="'{{index}}'">{{currency.symbol}}</label>
                </div>
            </div>
        </div>
    </div>


    <form class="form" name="userForm" novalidate>
        <div class="form-group row">
            <label class="col-2 col-form-label">Start Date</label>
            <div class="row">
                <div class=col-10">
                    <p class="input-group">
                        <input type="text" class="form-control" uib-datepicker-popup ng-model="startDate"
                               is-open="popup1.opened" datepicker-options="dateOptions" ng-required="true"
                               close-text="Close" alt-input-formats="altInputFormats"/>
                        <span class="input-group-btn">
                <button type="button" class="btn btn-default" ng-click="open1()"><i
                        class="glyphicon glyphicon-calendar"></i></button>
                </span>
                    </p>
                </div>
            </div>
        </div>
        <div class="form-group">
            <label class="col-2 col-form-label">End Date</label>
            <div class="row">
                <div class=col-10">
                    <p class="input-group">
                        <input type="text" class="form-control" uib-datepicker-popup ng-model="endDate"
                               is-open="popup2.opened" datepicker-options="dateOptions" ng-required="true"
                               close-text="Close"/>
                        <span class="input-group-btn">
                <button type="button" class="btn btn-default" ng-click="open2()"><i
                        class="glyphicon glyphicon-calendar"></i></button>
                </span>
                    </p>
                </div>
            </div>
        </div>

        <div class="form-group row">
            <label class="col-2 col-form-label"> Select clasification method</label>

            <div class="col-10">
                <div class="radio radio-primary">
                    <ul>
                        <ol ng-repeat="classifier in $ctrl.classifiers">
                            <label>{{classifier.name}}
                                <input type="radio" ng-model="$ctrl.radioButton" id="optionsRadios1" name="name"

                                       value="{{classifier.name}}" required/>
                                <span class="circle"></span>
                                <span class="check"></span>
                            </label>

                        </ol>
                    </ul>
                </div>
            </div>
        </div>
        <!--ng-model="$ctrl.analysisPrameters.classifier" placeholder="bayes" required-->    <!--ng-disabled="false" -->

        <div class="form-group row">
            <label for="instancePeriod" class="col-2 col-form-label"> Period to predict next rate in days </label>
            <div class="col-10">
                <input class="form-control" type="number" id="instancePeriod"
                       ng-model="$ctrl.analysisPrameters.conceptInstanceSize" placeholder="4" required>
            </div>
        </div>
        <div class="form-group row">
            <label for="orderSum" class="col-2 col-form-label">Order sum without leverage</label>
            <div class="col-10">
                <input class="form-control" type="number" ng-model="$ctrl.ordersum" id="orderSum" required>
            </div>
        </div>
        <div class="form-group row">
            <label for="stopLoss" class="col-2 col-form-label">Stop Loss points</label>
            <div class="col-10">
                <input class="form-control" type="number" value="30" id="stopLoss"
                       ng-model="$ctrl.analysisPrameters.stopLossOrder">
            </div>
        </div>
        <div class="form-group row">
            <label for="takeProfit" class="col-2 col-form-label">Take Profit points</label>
            <div class="col-10">
                <input class="form-control" type="number" value="30" id="takeProfit"
                       ng-model="$ctrl.analysisPrameters.takeProfitOrder">
            </div>
        </div>


        <div class="row">
            <div class="submit-button">
                <button type="button" class="btn btn-raised btn-success" ng-click="$ctrl.tradeSimulation()"
                        class="btn btn-lg btn-block btn-raised btn-primary" ng-disabled="userForm.$invalid"> Simulate
                    trading
                </button>
            </div>
        </div>

    </form>

    <div class="panel panel-info">
        <div class="panel-heading">
            <h3 class="panel-title">Trading simulation results</h3>
        </div>
        <div class="panel-body">
            <table table class="table table-striped table-hover ">
                <thead>
                <tr>
                    <td>Symbol</td>
                    <td>Start Date</td>
                    <td>End date</td>
                    <td>Classifier</td>
                    <td>Profit in Base Points</td>
                    <td>Profit in USD</td>
                </tr>
                </thead>
                <tbody ng-if="$ctrl.analysisResults != null">
                <tr ng-repeat="simulation in $ctrl.analysisResults">
                    <td>{{simulation.financialInstrument}}</td>
                    <td>{{simulation.tradingStartDate | date:'yyyy.MM.dd'}}</td>
                    <td>{{simulation.tradingEndDate | date:'yyyy.MM.dd'}}</td>
                    <td>{{simulation.classifier}}</td>
                    <td>{{simulation.profitPoints}}</td>
                    <td>{{simulation.profitUSD}}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>